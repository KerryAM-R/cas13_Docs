1. Installation
===============


This process is to install the required packages for running the pipeline. 


------------------------------------------------------------------

Please install R version 4.5 or greater. If your operating system doesn't support this version of R, than some of the functions may not work as expected. 

MAC:
^^^^

* Install `R_mac <https://cran.r-project.org/bin/macosx/>`_ 
* Install `RStudio <https://posit.co/download/rstudio-desktop/>`_
* Install `Quartz <https://www.xquartz.org>`_

Windows:
^^^^^^^^

* Install `R.Windows <https://cran.r-project.org>`_
* Install `RStudio <https://posit.co/download/rstudio-desktop/>`_
* Install `Rtools <https://cran.r-project.org/bin/windows/Rtools/>`_

Linux:
^^^^^^

* install `R.linux <https://cran.r-project.org/bin/linux/ubuntu/fullREADME.html>`_

using **sudo apt install** the following:
libcurl, libfontconfig1, libtiff5, liblapack-dev, libblas-dev, libglpk-dev, libudunits2-dev, libgdal-dev libgeos-dev, libproj-dev
and also the gfortran


Sytem requirements
^^^^^^^^^^^^^^^^^^
Recommended to use a 64-bit OS with at least 16GB of RAM, ideally >=16GB. This is needed for the memory intensive merging and annotation steps. 

short-cut key for running a line of R code
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

   put the cursor on the line you want to run. 

        Mac: Command shift Enter
        Windows: ctrl shift Enter

Downloading and installing cas13_pipeline
------------------------------------------

Follow the steps in the **install.R** file found in the **Directory_for_Project**


:: 

      # see https://cas13-docs.readthedocs.io/en/latest/index.html for more details on the tutorial to follow through.
      # This is to make sure with installing from source is set to the g++ compiler
      Sys.setenv("CXX" = "g++")
      
      # installing Cas13_pipeline
      if (!require("BiocManager", quietly = TRUE))
        install.packages("BiocManager")
      
      if (!require("devtools", quietly = TRUE))
        install.packages("devtools")
      
      if (!require("usethis", quietly = TRUE))
        install.packages("usethis")
      
      # install Backend with Devtools
      # if you get asked about installing from SOURCE, select NO.
      # if asked about updating the packages, select either 1 for all, or 3 for none.
      # also run this line to check for updates
      devtools::install_github("KerryAM-R/cas13.platform/Backend)

      
      # if then prompted with all the bioconductor based packages to install from source on M1 or greater Mac chip
      y
      
      # under development - latest build, but may be unstable
      # devtools::install_github("KerryAM-R/Cas13_Platform/cas13_Backend", ref = "beta-version", force = T)
      
      # import all of the fonts to your system. Will only need to be done the first time.
      require(extrafont)
      font_import()
      
      # when it asks if you would like to install the different fonts
      y
      
      loadfonts()
      
      fonts <- fonttable()
      head(fonts)
      
      # you many need to add in the git_token, and the Renviorn is opened with the following code.
      usethis::edit_r_environ()


**Possible installing prompts**

:: 

   When you see this line: "These packages have more recent versions available. It is recommended to update all of them. Which would you like to update?"
   
   Answer with  "1" and hit "Enter". 


**Other Mac prompts on M1 or greater chip**

The installation may ask you the following to install from source. In this instance, select yes. 

::

     There is a binary version available but the source version is later:
      binary source needs_compilation
      Seurat  5.0.3  5.1.0              TRUE

      Do you want to install from sources the package which needs compilation? (Yes/no/cancel) 
      y
      

**Installing the bioconductor packages from Source.**

::

      Packages which are only available in source form, and may need compilation of C/C++/Fortran: ‘zlibbioc’ ‘XVector’ ‘SparseArray’ ‘S4Arrays’ ‘IRanges’ ‘Biobase’ ‘DelayedArray’ ‘GenomicRanges’ ‘S4Vectors’
        ‘BiocNeighbors’ ‘BiocParallel’
      Do you want to attempt to install these from sources? (Yes/no/cancel) 
      y


